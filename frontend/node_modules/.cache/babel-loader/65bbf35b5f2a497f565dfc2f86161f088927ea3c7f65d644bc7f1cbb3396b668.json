{"ast":null,"code":"var _jsxFileName = \"D:\\\\PRISM\\\\phase6_dashboard\\\\frontend\\\\src\\\\components\\\\Dashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { getEnvironments, getDbStatus } from '../api';\nimport EnvironmentCard from './EnvironmentCard';\nimport PendingMigrations from './PendingMigrations';\nimport MigrationsTimeline from './MigrationsTimeline';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Dashboard() {\n  _s();\n  const [envs, setEnvs] = useState({});\n  const [status, setStatus] = useState({});\n  const [selectedEnv, setSelectedEnv] = useState('dev');\n  const [refreshKey, setRefreshKey] = useState(0);\n  async function load() {\n    try {\n      const e = await getEnvironments();\n      setEnvs(e);\n      const s = await getDbStatus();\n      setStatus(s);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n  function handleMigrationComplete() {\n    // Trigger refresh of all data\n    load();\n    setRefreshKey(prev => prev + 1);\n  }\n  useEffect(() => {\n    load();\n    const t = setInterval(load, 15000);\n    return () => clearInterval(t);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid\",\n      style: {\n        marginBottom: 20\n      },\n      children: Object.keys(envs).length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 20\n        },\n        children: \"Loading environments...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 11\n      }, this) : Object.keys(envs).map(k => /*#__PURE__*/_jsxDEV(EnvironmentCard, {\n        name: k,\n        latest: envs[k].latest,\n        dbStatus: status[k],\n        isSelected: selectedEnv === k,\n        onClick: () => setSelectedEnv(k)\n      }, k, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 16,\n        flexWrap: 'wrap'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          minWidth: 300\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginTop: 0\n          },\n          children: [\"Pending Migrations (\", selectedEnv.toUpperCase(), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PendingMigrations, {\n          env: selectedEnv,\n          onMigrationComplete: handleMigrationComplete\n        }, `pending-${selectedEnv}-${refreshKey}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 2,\n          minWidth: 400\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginTop: 0\n          },\n          children: [\"Migration History (\", selectedEnv.toUpperCase(), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MigrationsTimeline, {\n          env: selectedEnv\n        }, `history-${selectedEnv}-${refreshKey}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"fGlWTZM7rbnqbfcr1Qmq+QdFwfM=\");\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","getEnvironments","getDbStatus","EnvironmentCard","PendingMigrations","MigrationsTimeline","jsxDEV","_jsxDEV","Dashboard","_s","envs","setEnvs","status","setStatus","selectedEnv","setSelectedEnv","refreshKey","setRefreshKey","load","e","s","err","console","error","handleMigrationComplete","prev","t","setInterval","clearInterval","children","className","style","marginBottom","Object","keys","length","padding","fileName","_jsxFileName","lineNumber","columnNumber","map","k","name","latest","dbStatus","isSelected","onClick","display","gap","flexWrap","flex","minWidth","marginTop","toUpperCase","env","onMigrationComplete","_c","$RefreshReg$"],"sources":["D:/PRISM/phase6_dashboard/frontend/src/components/Dashboard.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { getEnvironments, getDbStatus } from '../api';\nimport EnvironmentCard from './EnvironmentCard';\nimport PendingMigrations from './PendingMigrations';\nimport MigrationsTimeline from './MigrationsTimeline';\n\nexport default function Dashboard(){\n  const [envs, setEnvs] = useState({});\n  const [status, setStatus] = useState({});\n  const [selectedEnv, setSelectedEnv] = useState('dev');\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  async function load(){\n    try{\n      const e = await getEnvironments();\n      setEnvs(e);\n      const s = await getDbStatus();\n      setStatus(s);\n    }catch(err){\n      console.error(err);\n    }\n  }\n\n  function handleMigrationComplete(){\n    // Trigger refresh of all data\n    load();\n    setRefreshKey(prev => prev + 1);\n  }\n\n  useEffect(()=>{ \n    load(); \n    const t = setInterval(load, 15000); \n    return ()=>clearInterval(t); \n  }, []);\n\n  return (\n    <div>\n      <div className=\"grid\" style={{marginBottom:20}}>\n        {Object.keys(envs).length === 0 ? (\n          <div style={{padding: 20}}>Loading environments...</div>\n        ) : (\n          Object.keys(envs).map(k => (\n            <EnvironmentCard \n              key={k} \n              name={k} \n              latest={envs[k].latest} \n              dbStatus={status[k]}\n              isSelected={selectedEnv === k}\n              onClick={() => setSelectedEnv(k)}\n            />\n          ))\n        )}\n      </div>\n\n      <div style={{display:'flex', gap:16, flexWrap: 'wrap'}}>\n        <div style={{flex:1, minWidth: 300}}>\n          <h3 style={{marginTop: 0}}>Pending Migrations ({selectedEnv.toUpperCase()})</h3>\n          <PendingMigrations \n            key={`pending-${selectedEnv}-${refreshKey}`}\n            env={selectedEnv} \n            onMigrationComplete={handleMigrationComplete}\n          />\n        </div>\n        <div style={{flex:2, minWidth: 400}}>\n          <h3 style={{marginTop: 0}}>Migration History ({selectedEnv.toUpperCase()})</h3>\n          <MigrationsTimeline \n            key={`history-${selectedEnv}-${refreshKey}`}\n            env={selectedEnv} \n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}