<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
      http://www.liquibase.org/xml/ns/dbchangelog
      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.33.xsd">


    <changeSet id="011-insert-app-name-setting" author="lalu">

        <comment>Insert app_name setting</comment>


        <!-- DO NOT use preConditions (avoids parser issues) -->
        <sql>
            INSERT INTO app_settings (setting_key, setting_value)
            SELECT 'app_name', 'MyApplication'
            FROM DUAL
            WHERE NOT EXISTS (
                SELECT 1 FROM app_settings
                WHERE setting_key = 'app_name'
            );
        </sql>


        <rollback>

            <delete tableName="app_settings">
                <where>setting_key = 'app_name'</where>
            </delete>

        </rollback>

    </changeSet>

</databaseChangeLog>